require=function t(e,i,n){function o(s,h){if(!i[s]){if(!e[s]){var d="function"==typeof require&&require;if(!h&&d)return d(s,!0);if(c)return c(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var r=i[s]={exports:{}};e[s][0].call(r.exports,function(t){var i=e[s][1][t];return o(i||t)},r,r.exports,t,e,i,n)}return i[s].exports}for(var c="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({ColliderCtl:[function(t,e,i){"use strict";cc._RF.push(e,"8c3f0U/r2hKs707tK7D3Uto","ColliderCtl"),cc.Class({extends:cc.Component,properties:{},init:function(t){return this._Target=t,cc.log("脚本",this._Target),this},onLoad:function(){},onCollisionEnter:function(t,e){cc.log("碰撞"),this._Target.touchOff();var i=cc.moveTo(.3,cc.p(0,-300));this.node.runAction(i),this.scheduleOnce(function(){this.node.runAction(cc.moveTo(.4,cc.p(0,-100))),this._Target.ndChoose.children[2].getComponent(cc.Sprite).spriteFrame=this._Target.picFram[0]},2)}}),cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"e89e5oSseRBZ5XpTAyODOKV","Game"),cc.Class({extends:cc.Component,properties:{ndPeople:cc.Node,ndMes:cc.Node,ndLastMes:cc.Node,ndCancel:cc.Node,ndSure:cc.Node,audioSource:{type:cc.AudioSource,default:null},ndClose:cc.Node,ndOpen:cc.Node,picJamOne:cc.spriteFrame,ndBreadUp:cc.Node,ndNextBtn:cc.Node,ndBackBtn:cc.Node,ndZhenban:cc.Node,ndKnife:cc.Node,ndLine:cc.Node,ndHotBread:cc.Node,ndJameBottle:cc.Node,ndJame:cc.Node,ndJam1:cc.Node,ndJam2:cc.Node,ndChoose:cc.Node,ndBread:cc.Node,nd_P:cc.Node,nd_Pre:cc.Node,ndP:cc.Node,ndBox:cc.Node,ndListPar:cc.Node,ndList:cc.Node,ndListParTwo:cc.Node,ndListTwo:cc.Node,numRem:0,numChoose:"1",lbMes:cc.Label,rsultLabel:cc.Label,mask:cc.Mask,promptLabel:cc.Label,picFram:{type:cc.SpriteFrame,default:[]},picBreadFram:{type:cc.SpriteFrame,default:[]},picVegetableFram:{type:cc.SpriteFrame,default:[]},picMetFram:{type:cc.SpriteFrame,default:[]},PbListCtl:{type:cc.Prefab,default:[]},PbListMet:{type:cc.Prefab,default:[]},picJamPic:{type:cc.SpriteFrame,default:[]},addType:1,numStep:1},play:function(){this.audioSource.play()},pause:function(){this.audioSource.pause()},upAudio:function(){this.audio=cc.sys.localStorage.getItem("GameAudio",this.audio),"true"==this.audio?(this.ndOpen.active=!1,this.ndClose.active=!0,this.play()):(this.ndOpen.active=!0,this.ndClose.active=!1,this.pause())},onLoad:function(){this.upAudio(),this._compbFun=this.node.addComponent("pbCtl"),this.ndBread.active=!1,this.mask.node.active=!1,this.colliderCtl=this.ndBread.getComponent("ColliderCtl").init(this),this.picArr=[this.picFram,this.picBreadFram,null,null,null,null,this.picVegetableFram,null,this.picMetFram,null,null],this.upUi(),this.colliderFunc(),this.ndP.active=!1,this.nd_P.active=!1},upUi:function(){var t=this;this.numRem=1,_.times(this.picFram.length,function(e){var i=cc.instantiate(t.ndP);i.active=!0,i.getComponent(cc.Sprite).spriteFrame=t.picFram[e],i.name=e+" ",t.ndList.addChild(i)})},onButtonClick:function(t,e){switch(e){case"back":this.ndBox.active=!0;break;case"cancel":this.ndBox.active=!1;break;case"sure":cc.director.loadScene("Main");break;case"jam1":this.ndJameBottle.active=!0,this.ndJame.active=!1,this.mask.node.children[0].getComponent(cc.Sprite).spriteFrame=this.picJamPic[0],this.ndNextBtn.getComponent(cc.Button).interactable=!0;break;case"jam2":this.ndJameBottle.active=!0,this.ndJame.active=!1,this.mask.node.children[0].getComponent(cc.Sprite).spriteFrame=this.picJamPic[1],this.ndNextBtn.getComponent(cc.Button).interactable=!0;break;case"next":this.checkPic();break;case"stop":this.ndClose.active=!1,this.ndOpen.active=!0,this.pause(),this.audio=!1,cc.sys.localStorage.setItem("GameAudio",this.audio);break;case"continue":this.ndClose.active=!0,this.ndOpen.active=!1,this.play(),this.audio=!0,cc.sys.localStorage.setItem("GameAudio",this.audio)}},checkPic:function(){null==this.ndChoose.getChildByName(this.numChoose).getComponent(cc.Sprite).spriteFrame?cc.log(".............."):(this.changeList(),this.numChoose=this.numChoose-0+1+"",cc.log("numChoose",this.numChoose))},changeList:function(){if(this.numRem+=1,2==this.numRem&&(this.ndBread.active=!0),3==this.numRem||4==this.numRem||5==this.numRem)3==this.numRem||4==this.numRem?3==this.numRem?(this.ndListParTwo.active=!1,this.destroyFunc(),this.ndHotBread.active=!0,this.upTouch(),cc.log("现在是烤面包阶段")):(this.ndHotBread.active=!1,this.ndBread.setPosition(0,0),this.ndJame.active=!0,1==this.ndJame.active&&(this.ndNextBtn.getComponent(cc.Button).interactable=!1),this.touchOff(),cc.log("现在是选果酱阶段"),cc.log("【看一下两个数据】",this.numChoose,this.numRem)):(this.touchBegin(),this.ndBread.active=!0,this.mask.node.active=!0,this.ndJame.active=!1,this.numRem+=1);else{if(this.numRem%2==1)if(9==this.numRem){for(this.ndNextBtn.getComponent(cc.Button).interactable=!1,this.onDestroy(),this.touchOff(),this.upKnife(),this.ndZhenban.off(cc.Node.EventType.TOUCH_START,function(t){cc.log("【触摸开始】"),this.cutMove()},this),this.addType=2,cc.log("this.numRem什么阶段",this.numRem),this.ndListPar.active=!1,this.ndListParTwo.active=!0;this.ndListTwo.children.length>0;)this.ndListTwo.children[0].removeFromParent();this.upDataPic()}else this.ndNextBtn.getComponent(cc.Button).interactable=!1,this.onDestroy(),this.touchOff(),this.upKnife(),this.ndZhenban.off(cc.Node.EventType.TOUCH_START,function(t){cc.log("【触摸开始】"),this.cutMove()},this),this.addType=2,cc.log("this.numRem什么阶段",this.numRem),this.ndListPar.active=!0,this.destroyFunc(),this.ndListParTwo.active=!1,this.upDataPic();else if(10==this.numRem){this.ndChoose.getChildByName("1").active=!0,this.ndBread.active=!0,this.ndZhenban.active=!1,this.ndKnife.active=!1,this.ndListParTwo.active=!1;var t=cc.instantiate(this.ndChoose.getChildByName("6").children[0]);this.ndChoose.getChildByName("6").children[0].removeFromParent(),t.scale=.5,this.ndBread.addChild(t);var e=cc.instantiate(this.ndBreadUp);e.children[0].getComponent(cc.Sprite).spriteFrame=this.ndBread.getComponent(cc.Sprite).spriteFrame,this.ndBread.addChild(e),e.setPosition(0,50),this.ndBread.setPosition(0,0),this.ndChoose.children[0].setPosition(0,0),this.ndLastMes.active=!0,this.ndPeople.active=!0,this.ndMes.active=!0,this.ndNextBtn.active=!1,this.ndBackBtn.active=!1,this.ndCancel.active=!1,this.ndSure.setPosition(0,-120)}else 8==this.numRem?this.vegetableToham():(this.ndListParTwo.active=!0,this.destroyFunc(),this.ndListPar.active=!1,cc.log("active",this.ndListParTwo.active),this.upDataPic());cc.log("【记录步骤的数字】",this.numRem)}},buttonLast:function(){cc.director.loadScene("Main")},upDataPic:function(){var t=this,e=this.picArr[this.numRem-1];1==this.addType?_.times(e.length,function(i){var n=cc.instantiate(t.nd_P);n.active=!0,n.getComponent(cc.Sprite).spriteFrame=e[i],n.name=i+" ",t.numRem%2==0?t.ndListTwo.addChild(n):t.ndList.addChild(n)}):_.times(e.length,function(i){t.nodePre=cc.instantiate(t.nd_Pre),t.nodePre.active=!0,t.nodePre.getComponent(cc.Sprite).spriteFrame=e[i],t.nodePre.name=i+" ",7==t.numRem?t.ndList.addChild(t.nodePre):t.ndListTwo.addChild(t.nodePre)})},upKnife:function(){this.ndChoose.getChildByName("1").active=!1,this.ndBread.active=!1,this.ndJameBottle.active=!1,this.ndChoose.getChildByName("6").active=!0,this.ndZhenban.active=!0,this.ndKnife.active=!0,7==this.numRem&&this.ndZhenban.on(cc.Node.EventType.TOUCH_START,function(t){cc.log("【触摸开始】"),this.cutMove()},this)},vegetableToham:function(){this.mask.inverted=!0,this.ndChoose.getChildByName("1").active=!0,this.ndBread.active=!0,this.ndZhenban.active=!1,this.ndKnife.active=!1,this.ndListPar.active=!1;var t=cc.instantiate(this.ndChoose.getChildByName("6").children[0]);this.ndChoose.getChildByName("6").children[0].removeFromParent(),t.scale=.5,this.ndBread.addChild(t)},destroyFunc:function(){if(this.numRem%2==1)for(;this.ndList.children.length>0;)this.ndList.children[0].removeFromParent();else for(;this.ndListTwo.children.length>0;)this.ndListTwo.children[0].removeFromParent()},eventTarget:function(t){var e=t.target.parent;this.addPicture(e)},eventTargetTwo:function(t){var e=t.target.parent.name-0;this.ndNextBtn.getComponent(cc.Button).interactable=!0,cc.log("【点击按钮后的获取按钮名字】",e),0==this.ndListParTwo.active?this.preNode=cc.instantiate(this.PbListCtl[e]):this.preNode=cc.instantiate(this.PbListMet[e]),1==this.ndChoose.getChildByName("6").children.length?(this.ndChoose.getChildByName("6").children[0].removeFromParent(),this.ndChoose.getChildByName("6").addChild(this.preNode),this.fromClick()):(this.ndChoose.getChildByName("6").addChild(this.preNode),this.fromClick())},addPicture:function(t){this.ndChoose.getChildByName(this.numChoose).getComponent(cc.Sprite).spriteFrame=t.getComponent(cc.Sprite).spriteFrame},addPre:function(){},upTouch:function(){var t=this;this.node.on("touchmove",function(e){var i=e.getLocation(),n=t.ndChoose.convertToNodeSpaceAR(i);t.ndBread.setPosition(n.x,n.y)})},touchOff:function(){this.node.off("touchmove")},colliderFunc:function(){cc.director.getCollisionManager().enabled=!0},touchBegin:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegin,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_onTouchBegin:function(t){cc.log("touchBegin");var e=t.touch.getLocation();e=this.ndBread.convertToNodeSpaceAR(e),this._addCircle(e)},_onTouchMoved:function(t){var e=t.touch.getLocation();e=this.ndBread.convertToNodeSpaceAR(e),this._addCircle(e)},_onTouchEnd:function(t){var e=t.touch.getLocation();e=this.ndBread.convertToNodeSpaceAR(e),this._addCircle(e)},_addCircle:function(t){var e=this.mask._clippingStencil,i=cc.color(255,255,255,0);e.drawPoly(this.mask._calculateCircle(t,cc.p(50,50),64),i,0,i),cc.renderer.childrenOrderDirty=!0},fromClick:function(){this.numStep=1,this.moveFun=this.preNode.getComponent("pbCtl"),this.objPosition=this.moveFun.getPosition(this.numStep),this.ndKnife.setPosition(this.objPosition.posX,this.objPosition.posY)},cutMove:function(){var t=this;this.cutFunc=function(e){t.knifeX=t.objPosition.posX,t.knifeY=t.ndKnife.y,t.firstPosition=t.objPosition.posY;var i=e.getDeltaY()<0?e.getDeltaY():0;t.knifeY+=i,t.ndKnife.setPosition(t.knifeX,t.knifeY);var n=t.objPosition.posY;if(t.ndKnife.y<-n)if(1==this.numStep){t.moveFun.moveFun(this.numStep),this.numStep+=1,this.objPosition=this.moveFun.getPosition(this.numStep);var o=cc.moveTo(1,cc.p(t.objPosition.posX,t.objPosition.posY));t.ndZhenban.off(cc.Node.EventType.TOUCH_MOVE,this.cutFunc,this),t.ndKnife.runAction(o)}else if(2==this.numStep){t.moveFun.moveFun(this.numStep),this.numStep+=1,this.objPosition=this.moveFun.getPosition(this.numStep);var c=cc.moveTo(1,cc.p(t.objPosition.posX,t.objPosition.posY));t.ndZhenban.off(cc.Node.EventType.TOUCH_MOVE,this.cutFunc,this),t.ndKnife.runAction(c)}else this.ndZhenban.off(cc.Node.EventType.TOUCH_START,function(t){cc.log("【触摸开始】"),this.cutMove()},this)},t.ndZhenban.on(cc.Node.EventType.TOUCH_MOVE,this.cutFunc,this)}}),cc._RF.pop()},{}],Main:[function(t,e,i){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","Main"),cc.Class({extends:cc.Component,properties:{ndBox:cc.Node,lbMes:cc.Label,ndClose:cc.Node,ndOpen:cc.Node,audioSource:{type:cc.AudioSource,default:null}},onLoad:function(){cc.director.preloadScene("Game",function(){cc.log("Next scene preloaded")}),this.audio=cc.sys.localStorage.getItem("GameAudio",this.audio),"true"==this.audio||null==this.audio?(this.ndOpen.active=!0,this.ndClose.active=!1,this.play()):(this.ndOpen.active=!1,this.ndClose.active=!0,this.pause())},play:function(){this.audioSource.play()},pause:function(){this.audioSource.pause()},onButtonClick:function(t,e){switch(e){case"sand":cc.director.loadScene("Game");break;case"ham":case"hot":this.ndBox.active=!0;break;case"sure":this.ndBox.active=!1;break;case"stop":this.ndClose.active=!0,this.ndOpen.active=!1,this.pause(),this.audio=!1,cc.sys.localStorage.setItem("GameAudio",this.audio);break;case"continue":this.ndClose.active=!1,this.ndOpen.active=!0,this.play(),this.audio=!0,cc.sys.localStorage.setItem("GameAudio",this.audio)}}}),cc._RF.pop()},{}],NewScript:[function(t,e,i){"use strict";cc._RF.push(e,"bb93aasFHJCQ7H+o/vTtJvP","NewScript"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],pbCtl:[function(t,e,i){"use strict";cc._RF.push(e,"ad5a3YkT/tBxLg4egZelYma","pbCtl"),cc.Class({extends:cc.Component,properties:{nd1:cc.Node,nd2:cc.Node,nd3:cc.Node},onLoad:function(){this.objPosition={}},moveFun:function(t){if(1==t){var e=cc.moveBy(.6,cc.p(-50,0));this.nd1.runAction(e)}else if(2==t){var i=cc.moveBy(.6,cc.p(-25,0));this.nd2.runAction(i)}},getPosition:function(t){if(1==t){var e=this.nd1.getPosition().x+this.nd1.width,i=this.nd1.getPosition().x,n=this.nd1.getPosition().y+this.nd1.height/2;return cc.log("nd1Pos",i),cc.log("nd1PosX",e),cc.log("nd1PosY",n),this.objPosition.posX=e,this.objPosition.posY=n,this.objPosition}if(2==t){var o=this.nd2.getPosition().x+this.nd2.width/2,c=this.nd2.getPosition().y+this.nd2.height/2;return cc.log("nd1Pos",o),this.objPosition.posX=o,this.objPosition.posY=c,this.objPosition}var s=this.nd3.getPosition().x+this.nd3.width/2,h=this.nd3.getPosition().y+this.nd3.height/2;return cc.log("nd1Pos",s),this.objPosition.posX=s,this.objPosition.posY=h,this.objPosition}}),cc._RF.pop()},{}],pbHelper:[function(t,e,i){"use strict";cc._RF.push(e,"522dbs22XVI5KzB3j2zZ+zW","pbHelper"),cc._RF.pop()},{}],scratchCardNodeCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"a2838JNmiFCTqNmFKXHM54m","scratchCardNodeCtrl"),cc.Class({extends:cc.Component,properties:{rsultLabel:cc.Label,mask:cc.Mask,promptLabel:cc.Label},guaGuaKaBegin:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegin,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},start:function(){},_onTouchBegin:function(t){cc.log("touchBegin");var e=t.touch.getLocation();e=this.node.convertToNodeSpaceAR(e),this._addCircle(e)},_onTouchMoved:function(t){var e=t.touch.getLocation();e=this.node.convertToNodeSpaceAR(e),this._addCircle(e)},_onTouchEnd:function(t){var e=t.touch.getLocation();e=this.node.convertToNodeSpaceAR(e),this._addCircle(e)},_onTouchCancel:function(t){},_addCircle:function(t){var e=this.mask._clippingStencil,i=cc.color(255,255,255,0);e.drawPoly(this.mask._calculateCircle(t,cc.p(50,50),64),i,0,i),cc.renderer.childrenOrderDirty=!0}}),cc._RF.pop()},{}]},{},["ColliderCtl","NewScript","pbCtl","pbHelper","scratchCardNodeCtrl","Game","Main"]);